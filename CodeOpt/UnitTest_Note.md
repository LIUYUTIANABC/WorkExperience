### 单元测试是什么

参考网址: https://www.zhihu.com/question/28729261

- 客观来说，单元测试和使用版本控制系统（GIT,SVN）是一样重要的。
- 代码的终极目标有两个:
  > 第一个: 是**实现需求**
  > 第二个: 是**提高代码质量**和**可维护性**
- 单元测试是为了提高代码质量和可维护性，是实现代码的第二个目标的一种方法
- 代码的可维护性: 是指增加一个新功能，或改变现有功能的成本，成本越低，可维护性即越高
- 代码质量:
  > **面向对象编程（OOP）**，或**函数式编程（FP）**
  > 良好的代码风格: 使用了缩进，良好的变量命名，逻辑也清晰
  > 把一个模块里的150行堆砌在一起的代码再提取成1个对象的15种方法，或者15个独立的函数（具体怎么提取，你得看相关的书籍）
- 虽然，从绝对的角度说，单元测试很重要，但是，从相对的角度来讲，小的代码量，简单固定的需求，个人开发，一锤子买卖等等都会让单元测试显得不那么重要 <font color="red">（这种情况下的确也许不用写单元测试）</font>
- 记住，**单元测试的威力更多不是体现在新代码的编写上，而是对已有代码的更改**
- 当系统的复杂度超过了你的逻辑，记忆能力，你必须依靠别的工具来帮助你减少问题
- **如果你觉得自己的代码，好像不可以测试？**
  - 这种情况可能是你代码本身导致的，首先你要写具有“可测性”的代码
  - 这意味着你不能写面向过程的，流水式的，几百行逻辑堆一起的代码
  - 你要学一些**模块化技巧**，**面向对象**和**函数式编程**理念，还有很多其它具体方法，比如能用本地变量，就不要用全局变量等等，让你的代码具有可测性，这些知识的学习应该放在单元测试之前。
- **单元测试代码比功能代码也多，这样成本很高？**
  - 事实上单元测试代码都是异常简单的一些 **“断言”代码**，断言就是判断一个函数或对象的一个方法所产生的结果是否等于你期望的那个结果，这样的代码看起来很多，但事实上书写的成本很低。
- 单元测试是在你每次改完代码后自动执行，获得反馈只要几秒，并且会把所有功能跑一遍。
- **我们项目有专职测试人员啊，写单元测试的必要还大吗？**
  - 单元测试是检查代码粒度的bug（一般是以函数和对象的方法为粒度）
  - 外国已经有很多资深程序员论证了，不论你的单元测试代码质量有多高，覆盖面有多全，**单单是你去做这一件事，就可以很大程度的提高你的功能代码的质量，以及大幅减少BUG的存在**

### 写代码逻辑处理和方法

> 通用性技术逻辑
> 定制的业务逻辑

> 独立方法
> 外部依赖

程序 **MVC 框架**, 可能需要三个文件;
- 调用数据库（Model），实现简单的UI界面（View），实现了类似“书名为空的书不允许添加到数据库”的一些逻辑（Controller）

### 单测介绍和测试方法

参考网址: https://www.cnblogs.com/lovesqcc/p/6411233.html

- 独立测试，功能最小模块:
  - 独立方法的测试采用 **“输入-输出模型”**，即给定一组输入测试数据集，调用指定方法应当生成指定的输出数据集
  - 填充参数和**断言**修改成真正有效的单测

- 有外部依赖，调用方法的:
  - 技巧: 另一种技巧是，可以通过函数接口来隔离外部调用依赖

********************************************************************

- 短链测试:
  - 短链测试不需要依赖外部服务，仅对短小的一段代码进行测试，写完后几乎不需要准备就能立即运行完成，而且当运行出错时，几乎可以很快定位出问题的位置
- 长链测试:
  - 长链测试:在写完后需要花费时间来准备数据、环境和外部服务，运行时间更长，而且运行出错时，往往要花更多时间来进行调试
- 单测是短链测试

********************************************************************

- ****单测技巧**:
  - 空、边界、异常是三种常见的单测点，是BUG多发地
  - 测试代码分离。当新配置式编程，将测试数据集与增测试用例时，只要新增测试数据集即可，测试主体代码完全不用动。
  - 编写更易测试的**短小方法**，编写短小方法也可以增进可扩展能力的提升。
  - 代码覆盖率，**尽量做到代码全覆盖**
